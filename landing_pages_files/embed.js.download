!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8f33e153-691e-4e7e-959e-b5c74e1fbd91",e._sentryDebugIdIdentifier="sentry-dbid-8f33e153-691e-4e7e-959e-b5c74e1fbd91")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"production_v1.7.518_1_d7753c9"},(()=>{var e={3633:e=>{e.exports=function(){var e=function(e){return"function"===typeof e},t=Math.pow(2,53)-1,n=function(e){var n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(n,0),t)},i=function(e){var t=e.next();return!Boolean(t.done)&&t};return function(t){"use strict";var o,a,r,s=this,d=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof d){if(!e(d))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}var c=function(t,n){if(null!=t&&null!=n){var i=t[n];if(null==i)return;if(!e(i))throw new TypeError(i+" is not a function");return i}}(t,function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!==typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}}(t));if(void 0!==c){a=e(s)?Object(new s):[];var l,u,w=c.call(t);if(null==w)throw new TypeError("Array.from requires an array-like or iterable object");for(r=0;;){if(!(l=i(w)))return a.length=r,a;u=l.value,a[r]=d?d.call(o,u,r):u,r++}}else{var m=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var g,h=n(m.length);for(a=e(s)?Object(new s(h)):new Array(h),r=0;r<h;)g=m[r],a[r]=d?d.call(o,g,r):g,r++;a.length=h}return a}}()}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(3633),t=n.n(e);const i=window.document.currentScript;if(!i)throw new Error("FT: Could not find embed script");const o=i.getAttribute("position"),a=i.getAttribute("position-x"),r=i.getAttribute("position-y"),s=i.getAttribute("offset-x")||"",d=i.getAttribute("offset-y")||"",c=/^[-]?\d+(px|rem)$/,l=c.test(s)?"calc(".concat(s," - 28px)"):"0",u=c.test(d)?"calc(".concat(d," - 28px)"):"0",w="top"===r?"top":"bottom",m="\n    border:none;\n    overflow:hidden;\n    position:fixed;\n    z-index:999999;\n    -webkit-mask-image: -webkit-radial-gradient(white, black);\n    width: 0;\n    height: 0;\n    max-height: 800px;\n\n    ".concat("left"===o||"left"===a?"left":"right",": ").concat(l,";\n    ").concat(w,": ").concat(u,";\n"),g="\n  width: 100%;\n  height: 100%;\n  max-height: initial;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n";function h(e){return"null"===e?"*":e}let f=h(function(){var e;return(null===(e=window.location.ancestorOrigins)||void 0===e?void 0:e[0])||(document.referrer?new URL(document.referrer).origin:"")}())||"*";const v=e=>{var t,n,i,o,a,r,s,d,c,l,u,w,m;null===(t=window.parent)||void 0===t||null===(n=t.postMessage)||void 0===n||n.call(t,e,f),null===(i=window)||void 0===i||null===(o=i.webkit)||void 0===o||null===(a=o.messageHandlers)||void 0===a||null===(r=a.widgetObservable)||void 0===r||null===(s=r.postMessage)||void 0===s||s.call(r,JSON.stringify(e)),null===(d=window)||void 0===d||null===(c=d.JSBridge)||void 0===c||null===(l=c.postMessage)||void 0===l||l.call(c,JSON.stringify(e)),null===(u=window)||void 0===u||null===(w=u.ReactNativeWebView)||void 0===w||null===(m=w.postMessage)||void 0===m||m.call(w,JSON.stringify(e))},p=e=>new Promise((t=>setTimeout(t,e)));async function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e();return n||(t>4?null:(await p(2**t*600),b(e,t+1)))}const y=window.matchMedia("(max-width: 480px)"),E=window.matchMedia("(max-height: 700px)"),C=window.document,S=C.currentScript,A="true"===(null===S||void 0===S?void 0:S.getAttribute("hide-ft-after-zd")),_="false"!==(null===S||void 0===S?void 0:S.getAttribute("auto-open-zd")),k=null===S||void 0===S?void 0:S.getAttribute("hide-intercom-widget");let T="",q=!1;function z(e){return e instanceof Error?e.message:String(e)}function L(){let e=C.querySelector('iframe[title="Button to launch messaging window"]');return null===e&&(e=C.querySelector('iframe[title="Button to launch messaging window, conversation in progress"]')),null===e&&(e=C.querySelector('iframe[id="launcher"]')),e}const P=()=>{const e=C.getElementById("forethought-chat"),t=null===S||void 0===S?void 0:S.getAttribute("src"),n=t?h(new URL(t).origin):"*",i=t=>{var i;e&&(null===(i=e.contentWindow)||void 0===i||i.postMessage(t,n))},o=function(e,t){i({event:"updateHelpdeskConversation",forethoughtConversationID:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,helpdeskConversationId:t,includeAttachments:arguments.length>3&&void 0!==arguments[3]&&arguments[3],includeTranscript:!(arguments.length>4&&void 0!==arguments[4])||arguments[4],integration:e})},a=C.createElement("style");a.id="ft-salesforce-style";const r=()=>{a.innerHTML="",C.body.appendChild(a)},s=()=>{a.innerHTML=".embeddedServiceHelpButton { display: none !important;}",C.body.appendChild(a)},d=()=>{let e=!0,t=0;const n=()=>{if(e&&t<=10){e=!1;const i=C.getElementsByClassName("chasitorText")[0];i?(i.value=T,function(e,t,n){if("createEvent"in C){const i=C.createEvent("HTMLEvents");i.keyCode=n,i.initEvent(t,!1,!0),e.dispatchEvent(i)}}(i,"keydown",13)):(e=!0,t++,setTimeout(n,1e3))}};n()},c=()=>{s(),window.Forethought("widget","show")};window.embedded_svc&&(window.embedded_svc.addEventHandler("afterDestroy",c),q=!0);const l=C.createElement("style");l.id="ft-zd-style";const u=()=>{try{window.zE&&window.zE("webWidget","hide")}catch{}try{window.zE&&window.zE("messenger","hide")}catch{}l.innerHTML='\n      iframe[id="launcher"] { display: none !important;}\n      iframe[title="Button to launch messaging window"] { display: none !important;}\n      iframe[title="Button to launch messaging window, conversation in progress"] { display: none !important;}\n      iframe[title="Message from company"] { display: none !important;}\n      iframe[data-product="web_widget"] { display: none !important ;}\n      ',C.body.appendChild(l)},w=()=>{try{window.zE&&window.zE("webWidget","show")}catch{}try{window.zE&&window.zE("messenger","show")}catch{}l.innerHTML='\n      iframe[id="launcher"] { display: block !important;}\n      iframe[title="Button to launch messaging window"] { display: block !important;}\n      iframe[title="Button to launch messaging window, conversation in progress"] { display: block !important;}\n      iframe[title="Message from company"] { display: block !important;}\n      iframe[data-product="web_widget"] { display: block !important;}\n    ',C.body.appendChild(l)},m=()=>{if(!window.zE)return i({event:"noZendeskObjectDetected"}),[];try{return window.zE("webWidget:get","chat:departments")||[]}catch{return[]}},g=e=>{if(!e)return;let t=!1;try{t=e("webWidget:get","chat:isChatting")}catch{}return"boolean"===typeof t&&(((e,t)=>{try{t?(w(),_&&e("webWidget","open"),window.Forethought("widget","hide")):u(),e("webWidget:on","chat:end",(function(){e&&(window.Forethought("widget","close"),A||(e("webWidget","close"),u(),window.Forethought("widget","show")))}))}catch{return}})(e,t),!0)},f=()=>{if(!window.zE)return i({event:"noZendeskObjectDetected"}),!1;try{const e=window.zE("webWidget:get","chat:isChatting");return"boolean"===typeof e&&e}catch{return!1}},y=C.createElement("style");y.id="ft-kustomer-style";const E=C.createElement("style");E.id="ft-intercom-style";const P=e=>{let{autoSendConfig:t,email:n,identityVerificationEnabled:i,isCurrentTabPrimary:o,name:a,question:r,userid:s}=e;const d={...window.intercomSettings,hide_default_launcher:!1};i||(a&&(d.name=a),s&&(d.user_id=s),n&&(d.email=n)),window.Intercom("update",d),E.innerHTML="",C.body.appendChild(E),r&&o?(window.Intercom("showNewMessage",r),t&&t.should_auto_send_message&&setTimeout((()=>{const e=C.querySelector('iframe[name="intercom-messenger-frame"]');if(e){var t;const n=null===(t=e.contentWindow)||void 0===t?void 0:t.document.querySelector(".intercom-composer-send-button");n&&n.click()}}),t.auto_send_timeout)):window.Intercom("show")},W=C.createElement("style");W.id="ft-snapengage-style";const I=()=>{window.SnapEngage&&window.SnapEngage.hideButton(),W.innerHTML="#designstudio-button { display: none !important;}",C.body.appendChild(W)},M=e=>{let{additionalParameters:t,email:n,isCurrentTabPrimary:i,name:o,question:a}=e;if(n&&window.SnapEngage.setUserEmail(n,!0),o&&window.SnapEngage.setUserName(o),window.SnapEngage&&window.SnapEngage.showButton(),W.innerHTML="#designstudio-button { display: block !important;}",C.body.appendChild(W),i){var r;window.SnapEngage.startLink();const e=null===(r=C.getElementById("designstudio-iframe").contentWindow)||void 0===r?void 0:r.document.getElementById("message-textarea");e&&a&&(e.value=a),null!==t&&void 0!==t&&t.transcript&&window.SnapEngage&&window.SnapEngage.setCallback("ChatMessageReceived",(function(e){const n=()=>{let e=!0;try{e&&(e=!1,window.SnapEngage.sendTextToChat(null===t||void 0===t?void 0:t.transcript))}catch(i){e=!0,window.SnapEngage.setCallback("ChatMessageReceived",""),setTimeout(n,5e3)}},i=null===t||void 0===t?void 0:t.bot_alias_list;i&&e&&!i.includes(e)&&(n(),window.SnapEngage.setCallback("ChatMessageReceived",""))}))}window.SnapEngage&&window.SnapEngage.setCallback("Close",(function(){I(),window.Forethought("widget","show")}))},R=e=>{let{email:t,isCurrentTabPrimary:n,name:i,question:o}=e;window.drift.on("ready",(function(){const e={};t&&(e.email=t),i&&(e.nickname=i),window.drift.api.setUserAttributes(e)})),o&&n&&window.drift.api.goToNewConversation(o),window.drift&&window.drift.api.openChat()},F=(e,t)=>{(e=>{switch(e){case"hide":return void window.Forethought("widget","hide");case"minimize":return void window.Forethought("widget","close");default:;}})(e),v({...t,event:"forethoughtWidgetGenericHandoff"})},x=C.createElement("style");x.id="ft-brand-embassy-style";const N=e=>{let{autoStartSession:t,customFields:n,isCurrentTabPrimary:i,name:o,question:a}=e;if(o&&window.brandembassy("setCustomerName",o),n)for(const[r,s]of Object.entries(n))window.brandembassy("setCustomField",r,s);i&&(window.brandembassy("hideFirstSentMessage",!1),window.brandembassy("sendFirstMessageAutomatically",a)),x.innerHTML="#be-frame {display: block !important;}",C.body.appendChild(x),window.brandembassy("openChatWindow"),t&&i&&window.brandembassy("autoStartSession")},O=C.createElement("style");O.id="ft-gorgias-style";const D=e=>{let{isCurrentTabPrimary:t,question:n}=e;O.innerHTML="#gorgias-chat-container {display: block !important;}",C.body.appendChild(O),window.GorgiasChat.hideChat(!1),window.GorgiasChat.open(),t&&window.GorgiasChat.sendMessage(n)},H=C.createElement("style");H.id="ft-freshchat-style";const B=e=>{let{conversationProperties:t,email:n,firstName:i,forethoughtConversationID:a,isCurrentTabPrimary:r,lastName:s,question:d,tags:c}=e;const l={},u={replyText:""};i&&(l.firstName=i),s&&(l.lastName=s),n&&(l.email=n),Object.keys(l).length&&window.fcWidget.user.setProperties(l),r&&((e=>{window.fcWidget.on("message:sent",(function(t){o("freshchat",t.message.conversationAlias,e,!1,!0),window.fcWidget.off("message:sent")}))})(a),c&&window.fcWidget.setTags(c),t&&Object.keys(t).length&&window.fcWidget.conversation.setConversationProperties({...t}),u.replyText=d),H.innerHTML="",C.body.appendChild(H),window.fcWidget.open(u)},U=C.createElement("style");U.id="ft-salesforce-messaging-style";const V=()=>{U.innerHTML="",C.body.appendChild(U)},j=e=>{let{hiddenFields:t,isCurrentTabPrimary:n}=e;n?(window.embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields(t),V(),(()=>{const e=C.querySelector('#embeddedMessagingConversationButton:not([title="Minimize the chat window"])');e&&e.click()})(),(()=>{const e=C.getElementById("embeddedMessagingFrame");if(e){var t;const i=e.contentDocument||(null===(t=e.contentWindow)||void 0===t?void 0:t.document);if(i){var n;const e=null===i||void 0===i||null===(n=i.querySelector("webruntime-app"))||void 0===n?void 0:n.querySelector("button.slds-button.minimizedButton");e&&e.click()}}})(),(()=>{var e;null===(e=C.getElementById("esw-fab"))||void 0===e||e.click()})()):V()},G=C.createElement("style");G.id="ft-live-chat-style";const K=()=>{window.LiveChatWidget?window.LiveChatWidget.call("hide"):window.LC_API&&window.LC_API.hide_chat_window(),G.innerHTML="#chat-widget-container {display: none !important;}",C.body.appendChild(G)},J=()=>{G.innerHTML="#chat-widget-container {display: block !important;}",C.body.appendChild(G)},Q=()=>{const e=window.LC_API;return!!e&&(!!e.is_loaded()&&(()=>{const e=window.LC_API;return!!e&&!!e.chat_running()&&(window.Forethought("widget","hide"),e.open_chat_window(),J(),!0)})())},Y=async e=>{var t;let{additionalParameters:n,department:a,email:s,featureFlags:d,forethoughtConversationID:l,integration:g,isCurrentTabPrimary:h,name:v,question:b,widgetOption:E}=e;T=b;const S=null===d||void 0===d?void 0:d.includes("next_avail_dept_routing"),A=null===d||void 0===d?void 0:d.includes("zendesk_department_verify_loop");switch(g){case"zendesk_messaging":const e=L();if(!window.zE||!e)return Z({error:"window.zE is undefined or Zendesk Messaging iframe is not found",integration:g,question:b,success:!1});window.Forethought("widget","hide"),w();try{window.zE("messenger:set","zIndex",9999999),window.zE("messenger","open")}catch(x){return Z({error:z(x),integration:g,question:b,success:!1})}(()=>{try{const e=L(),t=null===e||void 0===e?void 0:e.contentWindow,n=null===t||void 0===t?void 0:t.document.querySelector('button[data-garden-id="buttons.icon_button"]');null===n||void 0===n||n.addEventListener("click",(()=>{u(),window.zE&&window.zE("messenger:set","zIndex",-1),window.Forethought("widget","show")}))}catch(e){console.error(e)}})(),b&&h&&((e,t)=>{let n=!0,i=0;const o=()=>{if(n&&i<=10){var a;n=!1;const c=C.querySelector('iframe[title="Messaging window"]'),l=null===c||void 0===c||null===(a=c.contentWindow)||void 0===a?void 0:a.document.querySelector('textarea[data-garden-id="forms.textarea"]');if(l){var r,s,d;null===(r=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value"))||void 0===r||null===(s=r.set)||void 0===s||s.call(l,e),l.dispatchEvent(new Event("change",{bubbles:!0}));const n=null===c||void 0===c||null===(d=c.contentWindow)||void 0===d?void 0:d.document.querySelector('button[data-garden-id="buttons.icon_button"][aria-label="Send message"]');n&&(n.click(),t(!0))}else n=!0,i++,setTimeout(o,3e3)}else t(!1)};o()})(b,(e=>{Z(e?{integration:g,question:b,success:!0}:{error:"zdMessagingSendMessage issue",integration:g,question:b,success:!1})}));break;case"zendesk":const{chatTags:d,conversationIdUsedInPreviousSession:T="",ignoreAgentAvailability:H}=n,U=()=>{window.zE&&T&&window.zE("webWidget","chat:removeTags",["ft-conversation-id_".concat(T)])};if(!window.zE)return Z({chatTags:d,departmentReceived:a,departmentReceivedName:a,email:s,error:"window.zE is undefined",ignoreAgentAvailability:H,integration:g,name:v,question:b,success:!1});const V=null===(t=C.getElementById("launcher"))||void 0===t?void 0:t.parentElement;V&&(V.style.display="block");const G=A?await(async()=>{let e=[];try{const t=20,n=500;for(let i=0;i<t&&(await p(n),!(window.zE&&(e=window.zE("webWidget:get","chat:departments")||[],e.length>0)));++i);}catch(x){e=[]}return e})().then((e=>e.filter((e=>"online"===e.status)))):m().filter((e=>"online"===e.status));let K="";const Q=parseInt(a),Y=isNaN(Q)?null:Q;if(Y){var _;const e=m();K=(null===e||void 0===e||null===(_=e.find((e=>e.id===Y)))||void 0===_?void 0:_.name)||""}else K=a;const $=G.some((e=>e.name===K));if(G.length){if(!S&&K&&!$)return Z({chatTags:d,departmentReceived:a,departmentReceivedName:K,departments:m(),email:s,error:"Department is offline",ignoreAgentAvailability:H,integration:g,isReceivedDepartmentOnline:$,name:v,question:b,success:!1});try{U(),window.zE("webWidget","open")}catch(x){return Z({chatTags:d,departmentReceived:a,departmentReceivedName:K,departments:m(),email:s,error:x instanceof Error?x.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:H,integration:g,isReceivedDepartmentOnline:$,name:v,question:b,success:!1})}await new Promise((e=>{window.zE&&window.zE((async()=>{if(window.zE){if(v||s)try{window.zE.identify({email:s,name:v})}catch(x){return Z({chatTags:d,departmentReceived:a,departmentReceivedName:K,departments:m(),email:s,error:x instanceof Error?x.message:"Unknown window.zE.identify({ email, name }) invocation error",ignoreAgentAvailability:H,integration:g,isReceivedDepartmentOnline:$,name:v,question:b,success:!1})}if(a&&$){const e=5,t=500,n=async()=>{try{for(let n=0;n<e;++n)if(await p(t),window.zE){const e=f();window.zE&&window.zE("webWidget","updateSettings",{webWidget:{chat:{departments:{select:K}}}}),i({event:"zendeskUpdateSettings",updateSettingsData:{department:K,departments:m(),error:"",executionNumber:n+1,isReceivedDeptOnline:$,isSent:!0,isSessionActive:e,timeOfTrackingEvent:Date.now(),...Y&&{departmentId:Y}}})}}catch(x){i({event:"zendeskUpdateSettings",updateSettingsData:{department:K,departments:m(),error:x instanceof Error?x.message:"Unknown window.zE(webWidget, updateSettings) invocation error",isReceivedDeptOnline:$,isSent:!1,timeOfTrackingEvent:Date.now(),...Y&&{departmentId:Y}}})}};await n()}try{d&&window.zE("webWidget","chat:addTags",d)}catch(x){return Z({chatTags:d,departmentReceived:a,departmentReceivedName:K,departments:m(),email:s,error:x instanceof Error?x.message:"Unknown window.zE(webWidget, chat:addTags) invocation error",ignoreAgentAvailability:H,integration:g,isReceivedDepartmentOnline:$,name:v,question:b,success:!1})}w(),b&&h?setTimeout((()=>{try{var t,n;null===(t=(n=window).zE)||void 0===t||t.call(n,"webWidget","chat:send",b),e()}catch(x){Z({chatTags:d,departmentReceived:a,departmentReceivedName:K,departments:m(),email:s,error:x instanceof Error?x.message:"Unknown window.zE('webWidget', 'chat:send', question) invocation error",ignoreAgentAvailability:H,integration:g,isReceivedDepartmentOnline:$,name:v,question:b,success:!1})}}),3e3):e()}}))})),Z({chatTags:d,departmentReceived:a,departmentReceivedName:K,departments:m(),email:s,ignoreAgentAvailability:H,integration:g,isReceivedDepartmentOnline:$,name:v,question:b,success:!0})}else if(H){w();try{U(),window.zE("webWidget","open"),window.zE((()=>{try{window.zE&&((v||s)&&window.zE.identify({email:s,name:v}),d&&window.zE("webWidget","chat:addTags",d),K&&window.zE("webWidget","updateSettings",{webWidget:{chat:{departments:{select:K}}}}),setTimeout((()=>{var e,t;b&&h&&(null===(e=(t=window).zE)||void 0===e||e.call(t,"webWidget","chat:send",b))}),3e3))}catch(x){return Z({chatTags:d,departmentReceived:a,departmentReceivedName:K,departments:m(),email:s,error:x instanceof Error?x.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:H,integration:g,isReceivedDepartmentOnline:$,name:v,question:b,success:!1})}}))}catch(x){return Z({chatTags:d,departmentReceived:a,departmentReceivedName:K,departments:m(),email:s,error:x instanceof Error?x.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:H,integration:g,isReceivedDepartmentOnline:$,name:v,question:b,success:!1})}Z({chatTags:d,departmentReceived:a,departmentReceivedName:K,departments:m(),email:s,ignoreAgentAvailability:H,integration:g,isReceivedDepartmentOnline:$,name:v,question:b,success:!0})}else Z({chatTags:d,departmentReceived:a,departmentReceivedName:K,departments:m(),email:s,error:"All departments are offline",ignoreAgentAvailability:H,integration:g,isReceivedDepartmentOnline:$,name:v,question:b,success:!1});break;case"salesforce":const{extraPrechatFormDetails:X=[],manually_click_salesforce_button:ee=!1,manually_click_timeout:te=0,...ne}=n;if(!window.embedded_svc)return Z({error:"window.embedded_svc is undefined",integration:g,manuallyClickSalesforceButton:ee,success:!1});const ie={};if(!q){var k;if(null===(k=window.embedded_svc)||void 0===k||!k.addEventHandler)return Z({error:"window.embedded_svc.addEventHandler is undefined",integration:g,manuallyClickSalesforceButton:ee,success:!1});window.embedded_svc.addEventHandler("afterDestroy",c),q=!0}if(r(),window.Forethought("widget","hide"),h){const e={};if(v){const{firstName:t,lastName:n}=(e=>{const t=e.trim().replace(/\s{2,}/g," ").split(" "),n=t.length&&t[0]?t[0]:"";return{firstName:n,lastName:t.length>1?t.slice(1).join(" "):n}})(v);e.Name=v,e.FirstName=t,e.LastName=n}const t={extraPrechatFormDetails:X,prepopulatedPrechatFields:{Email:s,Subject:b,...e,...ne}};if(ie.startChatFields={...t},ee){var W;let e=!0;if(null===(W=window.embedded_svc)||void 0===W||!W.addEventHandler)return Z({error:"window.embedded_svc.addEventHandler is undefined",integration:g,manuallyClickSalesforceButton:ee,success:!1});window.embedded_svc.addEventHandler("afterMaximize",(()=>{setTimeout((()=>{if(e){var n;if(null===(n=window.embedded_svc.liveAgentAPI)||void 0===n||!n.startChat)return Z({error:"window.embedded_svc.liveAgentAPI.startChat is undefined",integration:g,manuallyClickSalesforceButton:ee,success:!1});window.embedded_svc.liveAgentAPI.startChat({...t}).then((()=>{e=!1}))}}),te)}));const n=document.querySelector("div.embeddedServiceHelpButton button");ie.salesforceChatButton=n,n?(n.click(),Z({...ie,integration:g,manuallyClickSalesforceButton:ee,success:!0})):Z({...ie,error:"Salesforce chat button is not found",integration:g,manuallyClickSalesforceButton:ee,success:!1})}else{var I;if(null===(I=window.embedded_svc.liveAgentAPI)||void 0===I||!I.startChat)return Z({error:"window.embedded_svc.liveAgentAPI.startChat is undefined",integration:g,manuallyClickSalesforceButton:ee,success:!1});window.embedded_svc.liveAgentAPI.startChat({...t}),Z({...ie,integration:g,manuallyClickSalesforceButton:ee,success:!0})}}break;case"kustomer":if(!window.Kustomer)return Z({customFields:{...n.customFields},error:"window.Kustomer is undefined",integration:g,question:b,success:!1});const oe=window.Kustomer.isChatAvailable();if(void 0===oe)return Z({customFields:{...n.customFields},error:"Kustomer.isChatAvailable() returned undefined",integration:g,question:b,success:!1});const{availability:ae}=oe;if("disabled"===ae||"hidden"===ae)return Z({customFields:{...n.customFields},error:"Chat is ".concat(ae),integration:g,question:b,success:!1,widgetAvailability:ae});if(h)try{s&&window.Kustomer.describeCustomer({attributes:{emails:[s]}}),window.Kustomer.createConversation({customAttributes:{...n.customFields},message:b||"Conversation via Forethought"},(function(e,t){if(t||!e)throw t;{const t=!0,i=!0;o(g,e.conversationId,l,t,i),y.innerHTML="#kustomer-ui-sdk-iframe { display: block !important;}",C.body.appendChild(y),window.Forethought("widget","hide"),Z({customFields:{...n.customFields},integration:g,question:b,success:!0,widgetAvailability:ae})}}))}catch(O){return Z({customFields:{...n.customFields},error:z(O),integration:g,question:b,success:!1})}break;case"intercom":if(!window.Intercom)return Z({autoSendConfig:n.autoSendConfig,email:s,error:"window.Intercom is undefined",identityVerificationEnabled:n.identityVerificationEnabled,integration:g,name:v,question:b,success:!1,userid:n.userid});try{P({autoSendConfig:n.autoSendConfig,email:s,identityVerificationEnabled:n.identityVerificationEnabled,isCurrentTabPrimary:h,name:v,question:b,userid:n.userid})}catch(O){return Z({autoSendConfig:n.autoSendConfig,email:s,error:z(O),identityVerificationEnabled:n.identityVerificationEnabled,integration:g,name:v,question:b,success:!1,userid:n.userid})}Z({autoSendConfig:n.autoSendConfig,email:s,identityVerificationEnabled:n.identityVerificationEnabled,integration:g,name:v,question:b,success:!0,userid:n.userid});break;case"snap_engage":if(!window.SnapEngage||!window.SnapEngage.startLink||!window.SnapEngage.sendTextToChat)return Z({additionalParameters:n,email:s,error:"window.SnapEngage is undefined, or is missing necessary functions",integration:g,name:v,question:b,success:!1});try{M({additionalParameters:n,email:s,isCurrentTabPrimary:h,name:v,question:b})}catch(O){return Z({additionalParameters:n,email:s,error:z(O),integration:g,name:v,question:b,success:!1})}Z({additionalParameters:n,email:s,integration:g,name:v,question:b,success:!0});break;case"drift":if(!window.drift)return Z({email:s,error:"window.drift is undefined",integration:g,name:v,question:b,success:!1});try{R({email:s,isCurrentTabPrimary:h,name:v,question:b})}catch(O){return Z({email:s,error:z(O),integration:g,name:v,question:b,success:!1})}Z({email:s,integration:g,name:v,question:b,success:!0});break;case"generic":try{F(E,{...n}),Z({...n,integration:g,success:!0,widgetOption:E},!1)}catch(O){Z({...n,error:z(O),integration:g,success:!1,widgetOption:E},!1)}break;case"brand_embassy":const{autoStartSession:re,customFields:se}=n;if(!window.brandembassy)return Z({autoStartSession:re,customFields:se,error:"window.brandembassy is undefined",integration:g,name:v,question:b,success:!1});try{N({autoStartSession:re,customFields:se,isCurrentTabPrimary:h,name:v,question:b})}catch(O){return Z({autoStartSession:re,customFields:se,error:z(O),integration:g,name:v,question:b,success:!1})}Z({autoStartSession:re,customFields:se,integration:g,name:v,question:b,success:!0});break;case"gorgias":if(!window.GorgiasChat)return Z({error:"window.GorgiasChat is undefined",integration:g,question:b,success:!1});try{D({isCurrentTabPrimary:h,question:b})}catch(O){return Z({error:z(O),integration:g,question:b,success:!1})}Z({integration:g,question:b,success:!0});break;case"freshchat":{const{conversationProperties:e,firstName:t,lastName:i,tags:o}=n;if(!window.fcWidget)return Z({conversationProperties:e,email:s,error:"window.fcWidget is not found",firstName:t,forethoughtConversationID:l,integration:g,lastName:i,question:b,success:!1,tags:o});try{B({conversationProperties:e,email:s,firstName:t,forethoughtConversationID:l,isCurrentTabPrimary:h,lastName:i,question:b,tags:o})}catch(O){return Z({conversationProperties:e,email:s,error:z(O),firstName:t,forethoughtConversationID:l,integration:g,lastName:i,question:b,success:!1,tags:o})}Z({conversationProperties:e,email:s,firstName:t,forethoughtConversationID:l,integration:g,lastName:i,question:b,success:!0,tags:o});break}case"salesforce_messaging":{const e=n.hiddenFields||{};if(!window.embeddedservice_bootstrap)return Z({error:"window.embeddedservice_bootstrap is undefined",hiddenFields:e,integration:g,question:b,success:!1});try{j({hiddenFields:e,isCurrentTabPrimary:h})}catch(O){return Z({error:z(O),hiddenFields:e,integration:g,question:b,success:!1})}Z({hiddenFields:e,integration:g,question:b,success:!0});break}case"live_chat":if(void 0===window.LiveChatWidget&&void 0===window.LC_API)return Z({email:s,error:"both window.LiveChatWidget and window.LC_API are undefined",integration:"live_chat",name:v,question:b,success:!1});try{window.LiveChatWidget?(e=>{let{email:t,isCurrentTabPrimary:n,name:i,question:o}=e;window.LiveChatWidget&&(J(),i&&window.LiveChatWidget.call("set_customer_name",i),t&&window.LiveChatWidget.call("set_customer_email",t),n&&(window.LiveChatWidget.call("set_session_variables",{"Forethought Transcript":o}),window.LiveChatWidget.call("maximize")))})({email:s,isCurrentTabPrimary:h,name:v,question:b}):window.LC_API&&(e=>{let{email:t,isCurrentTabPrimary:n,name:i,question:o}=e;if(window.LC_API&&(J(),i&&window.LC_API.set_visitor_name(i),t&&window.LC_API.set_visitor_email(t),n)){const e=[{name:"Forethought Transcript",value:o}];window.LC_API.set_custom_variables(e),window.LC_API.open_chat_window()}})({email:s,isCurrentTabPrimary:h,name:v,question:b})}catch(O){return Z({email:s,error:z(O),integration:"live_chat",name:v,question:b,success:!1})}Z({email:s,integration:"live_chat",name:v,question:b,success:!0});break;default:Z({error:"Unknown integration: ".concat(g),integration:g,question:b,success:!1})}},Z=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];console.log("Forethought ".concat(e.integration," handoff"),e),i({event:"handoffStatus",hideWidget:t,success:e.success}),i({event:"handoffTrackingEvent",handoffData:e})};window.addEventListener("message",(e=>{const t=e.data,n=null===t||void 0===t?void 0:t.data,i=null===t||void 0===t?void 0:t.method;"liveagent.restored"===i&&window.embedded_svc.liveAgentAPI.browserSessionInfo.activeChatSessions&&window.Forethought("widget","hide"),"liveagent.initialized"===i&&(r(),window.Forethought("widget","hide")),"chasitorChatEstablished"===(null===n||void 0===n?void 0:n.event)&&d()})),window.addEventListener("message",(e=>{if((e=>Boolean((e.origin===n||"*"===n)&&e.data))(e))return"forethoughtWidgetLoaded"===e.data.event?(window.zE&&b((()=>g(window.zE))),window.LC_API?b(Q).then((e=>{e||K()})):K(),s(),y.innerHTML="#kustomer-ui-sdk-iframe { display: none !important;}",C.body.appendChild(y),"false"!==k&&(()=>{const e={...window.intercomSettings,hide_default_launcher:!0};window.intercomSettings={...e},window.Intercom&&(window.Intercom("hide"),window.Intercom("update",{...e})),E.innerHTML="\n      .intercom-launcher {display: none !important;}\n      .intercom-messenger-frame {display: none !important;}\n      .intercom-lightweight-app {display: none !important;}\n    ",C.body.appendChild(E)})(),I(),window.drift&&window.drift.hide(),x.innerHTML="#be-frame {display: none !important;}",C.body.appendChild(x),O.innerHTML="#gorgias-chat-container {display: none !important;}",C.body.appendChild(O),H.innerHTML="\n      #fc_frame {display: none !important;}\n      freshchat-widget {display: none !important;}\n    ",C.body.appendChild(H),U.innerHTML="\n      #embedded-messaging {display: none !important;}\n      #embedded-service {display: none !important;}\n    ",void C.body.appendChild(U)):void("forethoughtWidgetIntegrationHandoff"!==e.data.event||Y(e.data))}))};Array.from=t(),function(e){let t={height:"0",width:"0"},n=!1,i=!1;const o=window.document,a=o.currentScript;if(!a)throw new Error("FT: Could not find embed script");const r=a.getAttribute("data-api-key");if(!r)return;const s=a.getAttribute("full-screen"),d=a.getAttribute("hidden"),c="true"===a.getAttribute("data-builder-preview"),l="true"===a.getAttribute("data-solve-config-preview"),u=a.getAttribute("offset-y")||"0px",w=a.getAttribute("data-workflow-version"),f=null===(e=a.getAttribute("src"))||void 0===e?void 0:e.replace("embed.js",""),v={};Array.from(a.attributes).forEach((e=>{const t=e.nodeValue,n="null"===t;v[e.nodeName]=n?null:t}));const p=function(){var e;const p=o.createElement("iframe");p.setAttribute("id","forethought-chat"),p.setAttribute("name","Virtual Assistant Chat"),p.setAttribute("title","Virtual Assistant Chat"),p.setAttribute("allowfullscreen","allowfullscreen"),p.setAttribute("mozallowfullscreen","mozallowfullscreen"),p.setAttribute("msallowfullscreen","msallowfullscreen"),p.setAttribute("oallowfullscreen","oallowfullscreen"),p.setAttribute("webkitallowfullscreen","webkitallowfullscreen"),p.setAttribute("sandbox","allow-scripts allow-popups allow-top-navigation-by-user-activation allow-same-origin allow-popups-to-escape-sandbox allow-downloads allow-top-navigation");const b=Object.fromEntries(Array.from(a.getAttributeNames(),(e=>[e,a.getAttribute(e)||""]))),C=new URLSearchParams(b);p.setAttribute("src",f+"?v=2#".concat(C)),p.setAttribute("style",m),o.body.appendChild(p);const S=f?h(new URL(f).origin):"*",A=e=>{var t;null===(t=p.contentWindow)||void 0===t||t.postMessage(e,S)},_=e=>{p.setAttribute("style",m+e)};function k(e){let{height:t,width:n}=e;p.setAttribute("style","".concat(m,"\n        width: ").concat(n,";\n        height: ").concat(t,";"))}const T=()=>{p.hidden=!0},q=()=>{const e=y.matches,t=E;n&&e?A({isMobile:!0,isSmallScreen:!1}):!n||e||c||A({isMobile:!1,isSmallScreen:t.matches})},z=()=>{if(!i)if(q(),n){y.matches?_(g):function(){if(c){const e="max-width: ".concat(380,"px");_("\n  width: 100%;\n  right: 0;\n  height: calc(100% - 69px);\n  max-height: initial;\n  bottom: 0;\n  z-index: 1199;\n  border-radius: 12px 0 0 12px;\n"+e)}else{const e="428px",t="48px",n="24px";k({height:"0px"===u?"calc(90% - ".concat(u," - ").concat(t,")"):"calc(100% - ".concat(u," + ").concat(n,")"),width:e})}}()}else"0"===t.width?k({height:"100%",width:"calc(280px + 48px)"}):k(t)},L=()=>{p.hidden=!1,n||A({action:"showIframe"})},W=()=>window.document.getElementById("forethought-chat"),I=()=>{var e,t;return{offsetLeft:(null===(e=window.visualViewport)||void 0===e?void 0:e.offsetLeft)||0,offsetTop:(null===(t=window.visualViewport)||void 0===t?void 0:t.offsetTop)||0}};window.addEventListener("message",(e=>{var o;if(o=e,Boolean((o.origin===S||"*"===S)&&o.data))switch(e.data.event){case"hideSolveWidget":T();break;case"showSolveWidget":L();break;case"hideIframeWidget":W()&&T();break;case"showIframeWidget":W()&&L();break;case"forethoughtWidgetOpened":n=!0,z();break;case"forethoughtWidgetClosed":n=!1,z();break;case"forethoughtWidgetStartedInitializing":const o=y.matches,a=E;o?A({isMobile:!0,isSmallScreen:!1}):o||A({isMobile:!1,isSmallScreen:a.matches}),"true"===s&&A({action:"openWidget"}),d&&T(),A({API_KEY:r,href:window.location.href,isBuilderPreview:c,isSolveConfigPreview:l,origin:window.location.origin,rawParams:v,workflowVersion:w}),q();break;case"forethoughtWidgetLoaded":n=e.data.isOpen,z(),"function"===typeof y.addEventListener?(y.addEventListener("change",z),E.addEventListener("change",z)):(y.addListener(z),E.addListener(z));break;case"forethoughtWidgetResize":if(n)return;const{height:u,width:m}=e.data.dimensions;u&&m&&(t={height:u,width:m},k(t));break;case"forethoughtWidgetViewImage":e.data.open?(i=!0,_(g)):(i=!1,z())}})),null===(e=window.visualViewport)||void 0===e||e.addEventListener("scroll",(()=>{A({event:"forethoughtSetVisualViewport",payload:I()})})),window.Forethought=(e,t,n)=>{if("widget"===e){if("open"===t&&A({action:"openWidget"}),"close"===t&&A({action:"closeWidget"}),"hide"===t&&T(),"show"===t&&L(),"triggerEventComplete"===t){const e=null===n||void 0===n?void 0:n.identifier,i=(null===n||void 0===n?void 0:n.payload)||{};e?A({event:t,identifier:e,payload:i}):console.error("TRIGGER EVENT ERROR - event name is required at data.identifier")}var i;if("clearLocalData"===t&&A({action:"clearLocalData"}),"launchQuery"===t)"string"!==typeof(null===n||void 0===n||null===(i=n.payload)||void 0===i?void 0:i.query)?console.error("LAUNCH QUERY ERROR - data param must be initial query string"):n.payload.query.trim()?A({action:"launchQuery",payload:n.payload}):console.error("LAUNCH QUERY ERROR - data param must contain non whitespace characters")}},P()};"complete"===o.readyState||"interactive"===o.readyState?p():o.addEventListener("DOMContentLoaded",p)}()})()})();
//# sourceMappingURL=embed.js.map